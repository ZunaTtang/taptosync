# Cursor Project Rules - 숏폼 편집자 싱크 자동화 MVP

## TypeScript 규칙

- 모든 새 파일은 TypeScript로 작성
- 타입을 명시적으로 정의 (any 지양)
- 인터페이스/타입은 `models/` 또는 각 모듈 내부에 정의
- 파일 확장자: `.ts` (컴포넌트는 `.tsx`)

## React 규칙

- 함수형 컴포넌트만 사용
- Hooks 활용 (useState, useEffect, useRef 등)
- Props 타입은 명시적으로 정의
- 컴포넌트 파일명: PascalCase (예: `TextInput.tsx`)
- 컴포넌트는 `src/components/`에 위치

## Tailwind CSS 규칙

- Tailwind 유틸리티 클래스 우선 사용
- 커스텀 스타일은 최소화
- 반응형 디자인 고려 (sm, md, lg 브레이크포인트)
- 색상은 Tailwind 기본 팔레트 사용

## 폴더 구조 규칙

### 엔진/로직 분리
- **Sync Engine**: `src/features/sync/*` - 순수 함수 중심
- **Export Modules**: `src/features/export/*` - 포맷터 함수
- **도메인 모델**: `src/models/*` - 타입/인터페이스 정의
- **유틸리티**: `src/utils/*` - 재사용 가능한 순수 함수

### UI 컴포넌트
- **컴포넌트**: `src/components/*` - React 컴포넌트
- **레이아웃**: 좌측(텍스트 입력/라인 리스트), 우측(오디오 플레이어 + Tap 버튼 + 프리뷰)

### 테스트
- 테스트 파일: `tests/` 또는 각 모듈 옆에 `*.test.ts`
- 핵심 로직(Sync Engine, Export, 텍스트 처리)에 단위 테스트 필수

## 코딩 스타일

- 들여쓰기: 2 spaces
- 세미콜론: 사용
- 파일명: kebab-case (컴포넌트는 PascalCase)
- 함수명: camelCase
- 상수명: UPPER_SNAKE_CASE

## 모듈 설계 원칙

1. **순수 함수 중심**: 사이드 이펙트 최소화, 테스트 가능하게
2. **단일 책임 원칙**: 각 모듈은 명확한 하나의 역할
3. **의존성 최소화**: 외부 라이브러리 최소 사용
4. **명확한 인터페이스**: 함수 시그니처 명확히 정의

## 테스트 규칙

- Vitest 사용 (권장)
- 핵심 로직에 단위 테스트 작성
- 테스트는 각 단계마다 통과해야 함
- 테스트 파일명: `*.test.ts` 또는 `*.spec.ts`

## 포맷 규칙

- Prettier 사용 (가능하면)
- ESLint 사용 (가능하면)
- 빌드 전 lint/format 체크

## 작업 방식

- 작은 단위로 나눠서 변경
- 각 단계마다 빌드/테스트가 깨지지 않게 유지
- 중요한 설계 결정은 문서화
- 터미널 실행 불가 시 명령어를 정확히 제시

## 시간 포맷 규칙

- 내부 저장: 초 단위 (number, 예: 1.5)
- SRT: `HH:MM:SS,mmm` (밀리초 포함)
- LRC: `[mm:ss.xx]` (센티초 포함)
- CapCut CSV: 초 단위 (소수점, 예: 1.5)

## 예외 처리

- 오디오 미선택 상태에서 Tap 금지
- 라인 없음 상태 처리
- startTime 없는 라인 처리 (가능하면 균등 분배로 임시 채우기)
